<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>Hello, world!!!</h1>

    <input type="date" />

    <my-badge>New</my-badge>

    <my-button label="Huzzah!!!" disabled><span slot="icon">ðŸ¤˜</span>Click me!</my-button>

    <my-button class="themed">Also, click me!</my-button>

    <my-button class="themed2">Also, click me!</my-button>

    <style>
      my-badge {
        background-color: darkblue;
        color: white;
        padding: 5px;
        border-radius: 4px;
      }

      my-button.themed {
        --button-border-radius: 0px;
        --button-bg-color: darkred;
        --button-padding: 4px;
      }

      .themed2::part(control) {
        background-color: hotpink;
        color: black;
      }

      /* my-button {
        button {
          background-color: hotpink;
          color: black;
          padding: 1rem;
          border-radius: 4px;
        }
      } */
    </style>

    <style>
      html body button {
        background-color: brown;
      }
    </style>

    <script>
      class MyButton extends HTMLElement {
        static observedAttributes = ['label', 'disabled'];

        #label = 'Blah';
        #disabled = false;

        get label() {
          return this.#label;
        }

        set label(val) {
          this.#label = val;
          this.render();
        }

        get disabled() {
          return this.#disabled;
        }

        set disabled(val) {
          this.#disabled = val;
          this.render();
        }

        #shadowRoot;

        constructor() {
          super();
          this.#shadowRoot = this.attachShadow({ mode: 'open' });
          this.render();
        }

        attributeChangedCallback(name, olVal, newVal) {
          if(name === 'label') {
            this.label = newVal;
          } else if(name === 'disabled') {
            console.log('disabled', newVal)
            this.disabled = newVal !== null;
          }
        }

        render() {
          this.#shadowRoot.innerHTML = `
            <style>
              :host {
                --button-border-radius: 4px;
                --button-color: white;
                --button-bg-color: darkgreen;
                --button-padding: 1rem;
              }
              button {
                background-color: var(--button-bg-color);
                color: var(--button-color);
                padding: var(--button-padding);
                border-radius: var(--button-border-radius, 4px);
              }
            </style>
            <div>${this.label}</div>
            <button part="control" ${this.disabled ? 'disabled' : ''}>
              <slot name="icon"></slot>
              <slot></slot>
            </button>
          `;
        }
      }

      customElements.define('my-button', MyButton);
    </script>
  </body>
</html>
